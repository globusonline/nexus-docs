<!DOCTYPE html>
<html lang="en">
<head>
    <title>Nexus API Documentation</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" href="media/css/restdown.css">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
</head>
<body>
<div id="header">
    <h1>Nexus API Documentation Documentation</h1>
</div>

    <div id="sidebar">
<ul>
  <li><div><a href="#users">Users</a></div>
  <ul>
    <li><div><a href="#Create-user"><span class="method name"><span class="name">Create user</span></span></a></div></li>
    <li><div><a href="#Get-a-user"><span class="method name"><span class="name">Get a user</span></span></a></div></li>
    <li><div><a href="#Update-a-user-profiles"><span class="method name"><span class="name">Update a user profiles</span></span></a></div></li>
    <li><div><a href="#Change-user-password"><span class="method name"><span class="name">Change user password</span></span></a></div></li>
    <li><div><a href="#Delete-a-user"><span class="method name"><span class="name">Delete a user</span></span></a></div></li>
  </ul></li>
  <li><div><a href="#credentials">Credentials</a></div>
  <ul>
    <li><div><a href="#Register-a-ssh-credential."><span class="method name"><span class="name">Register a ssh credential.</span></span></a></div></li>
    <li><div><a href="#Register-an-X.509-credential"><span class="method name"><span class="name">Register an X.509 credential</span></span></a></div></li>
    <li><div><a href="#Register-a-MyProxy-OAuth-account-credential"><span class="method name"><span class="name">Register a MyProxy OAuth account credential</span></span></a></div></li>
    <li><div><a href="#Register-a-standard-MyProxy-account-credential"><span class="method name"><span class="name">Register a standard MyProxy account credential</span></span></a></div></li>
    <li><div><a href="#List-Credentials"><span class="method name"><span class="name">List Credentials</span></span></a></div></li>
  </ul></li>
  <li><div><a href="#groups">Groups</a></div>
  <ul>
    <li><div><a href="#List-Groups"><span class="method name"><span class="name">List Groups</span></span></a></div></li>
  </ul></li>
  <li><div><a href="#group">Group</a></div>
  <ul>
    <li><div><a href="#Group-Summary"><span class="method name"><span class="name">Group Summary</span></span></a></div></li>
    <li><div><a href="#List-group-members"><span class="method name"><span class="name">List group members</span></span></a></div></li>
    <li><div><a href="#Invite-member-to-group"><span class="method name"><span class="name">Invite member to group</span></span></a></div></li>
    <li><div><a href="#List-policies-for-group"><span class="method name"><span class="name">List policies for group</span></span></a></div></li>
  </ul></li>
</ul>

    </div>
    <div id="content">

<h1>Nexus API</h1>
<div class="intro">


<p>Nexus is the service which provides user profiles, groups and other resources for GlobusOnline.  It also provides the interfaces for authentication with GlobusOnline.</p>

<h3>All API calls start with</h3>

<pre class="base">
https://graph.api.globusonline.org
</pre>

<h3>Format</h3>

<p>All responses are <strong>JSON</strong> (that is, except for the current HTML docs that you are reading).</p>


</div>
<h1 id="users">Users</h1>

<p>Manage user profiles</p>

<h2 id="Create-user"><span class="method name"><span class="name">Create user</span></span></h2>

<p><em>post /users</em></p>

<p>None</p>

<p>None</p>

<h4>example request</h4>

<pre class="shell"><code>curl -X POST https://graph.api.globusonline.org/users -d '{
        "username": "username", 
        "full_name": "Dummy Users", 
        "accept_terms": true, 
        "opt_in": true, 
        "password": "ChangeMe", 
        "email": "no-reply@globusonline.org"
    }'
</code></pre>

<hr />

<p>Unsuccessfully create user with duplicate username</p>

<h4>example request</h4>

<pre class="shell"><code>curl -X POST https://graph.api.globusonline.org/users -d '{
        "username": "username", 
        "full_name": "Dummy Users", 
        "accept_terms": true, 
        "opt_in": true, 
        "password": "ChangeMe", 
        "email": "no-reply@globusonline.org"
    }'
</code></pre>

<hr />

<h2 id="Get-a-user"><span class="method name"><span class="name">Get a user</span></span></h2>

<p><em>Get /users/username</em></p>

<p>None</p>

<p>Successfully retrieve a user</p>

<h4>example request</h4>

<pre class="shell"><code>curl -X GET https://graph.api.globusonline.org/users/username
</code></pre>

<hr />

<p>Request nonexistant user.</p>

<h4>example request</h4>

<pre class="shell"><code>curl -X GET https://graph.api.globusonline.org/users/username
</code></pre>

<hr />

<h2 id="Update-a-user-profiles"><span class="method name"><span class="name">Update a user profiles</span></span></h2>

<p><em>PUT /users/username</em></p>

<p>None</p>

<p>Successfully update a user profile.</p>

<h4>example request</h4>

<pre class="shell"><code>curl -X PUT https://graph.api.globusonline.org/users/username -d '{
        "fullname": "New Name"
    }'
</code></pre>

<hr />

<h2 id="Change-user-password"><span class="method name"><span class="name">Change user password</span></span></h2>

<p><em>Post /users/username</em></p>

<p>None</p>

<p>Successfully change password</p>

<h4>example request</h4>

<pre class="shell"><code>curl -X POST https://graph.api.globusonline.org/users/username -d '{
        "password1": "NewPassword", 
        "password2": "NewPassword", 
        "currentpassword": "ChangeMe"
    }'
</code></pre>

<hr />

<h2 id="Delete-a-user"><span class="method name"><span class="name">Delete a user</span></span></h2>

<p><em>DELETE /user/username</em></p>

<p>None</p>

<p>Successfully delete user</p>

<h4>example request</h4>

<pre class="shell"><code>curl -X DELETE https://graph.api.globusonline.org/user/username
</code></pre>

<hr />

<h1 id="credentials">Credentials</h1>

<p>Manage credentials associated with a user profile.</p>

<p>Current supported types are:</p>

<ul>
<li>X.509</li>
<li>MyProxy</li>
<li>MyProxy (OAuth)</li>
<li>SSH (OpenSSH format)</li>
<li>Google (OpenId)</li>
</ul>

<h2 id="Register-a-ssh-credential."><span class="method name"><span class="name">Register a ssh credential.</span></span></h2>

<p><em>post /users/username/credentials/ssh2</em></p>

<p>None</p>

<p>Successfully create an SSH credential for a user</p>

<h4>example request</h4>

<pre class="shell"><code>curl -X POST https://graph.api.globusonline.org/users/username/credentials/ssh2 -d '{
        "alias": "My SSH Credential", 
        "ssh_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCfsbK35x9W3fH/bZ/AJC0mq93DC7ulCleDeQoCsYHWWbLLDtWnlkpHCjXwK1zV7ECYh2FioUs/Dw38+Cj3H+T0EG2ZZrsG6LQOOOLMnAeOic0dD5KmkqJxsMXF1q+vuI1/DKH4qv3ijELduKyqnm/TvXaed+ibrKnM+BWNb0/e2ZmvWZxlBtPC5vpn6VRXDVKbxbwK+X/VRfYyyh0UZcsPoVs99xeHOPZ8c9xCK3Gx9Djp78IWXFcEuuz29wWb/3LEwq7btvA8GC+qNDa+Sh3Co2ikvfoa8g0jVEr58aqE6IwD9NMEoIcK/rDvdoyP39mTBKqHYBQRJ+JOzX9KyViB comment"
    }'
</code></pre>

<hr />

<h2 id="Register-an-X.509-credential"><span class="method name"><span class="name">Register an X.509 credential</span></span></h2>

<p><em>post /users/username/credentials/x509</em></p>

<p>None</p>

<p>Successfully create an X.509 credential for a user</p>

<h4>example request</h4>

<pre class="shell"><code>curl -X POST https://graph.api.globusonline.org/users/username/credentials/x509 -d '{
        "alias": "My X.509", 
        "certificate": "-----BEGIN CERTIFICATE-----\nMIICejCCAeOgAwIBAgIBCTANBgkqhkiG9w0BAQUFADBJMQswCQYDVQQGEwJVUzEa\nMBgGA1UEChMRR2xvYnVzIENvbnNvcnRpdW0xHjAcBgNVBAMTFUNlcnRpZmljYXRl\nIEF1dGhvcml0eTAeFw0xMTAyMjQxOTU0MjBaFw0xMjAyMjQxOTU0MjBaMEAxCzAJ\nBgNVBAYTAlVTMRowGAYDVQQKExFHbG9idXMgQ29uc29ydGl1bTEVMBMGA1UEAxMM\nSkdsb2J1cyB0ZXN0MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC/lJGJInNL\n8EtkxNpkiSzAYDHgnEdopx7t7oyzAFIZ/wUXm2EL10M3maj/RaB+9buqmcSxMBp3\nnRJT72GO0MkxAYp20MSiDmDoTOQOwj4drt1plfYgDVfGp6NZdzaYGuu9FCIp8rNA\n9r45yE71rq7C/pgZkMgk231ICtJPWCAriwIDAQABo3sweTAJBgNVHRMEAjAAMCwG\nCWCGSAGG+EIBDQQfFh1PcGVuU1NMIEdlbmVyYXRlZCBDZXJ0aWZpY2F0ZTAdBgNV\nHQ4EFgQUeyIZsiXmtX/rBWJe1q2d1YkLZYQwHwYDVR0jBBgwFoAUeLGfYCEMWUsK\nTXr/aUeO0l3bGVYwDQYJKoZIhvcNAQEFBQADgYEA0xLD3WI14KnbUkD1kag0/vFk\n/RIYVEfGQEBQRAg9u48+5VixO5yPG8YCNODMAAMfBvmVBv1cuCszlLllDxVT96VM\nL3IjT582oYzQbk1DaDvGwNmQ1RTah6o/+CSOeRZ4Jr4h2p2CaTbMF2gwg+KLx8Pc\nPHNCl/fPxmu/1EYUBHo=\n-----END CERTIFICATE-----\n"
    }'
</code></pre>

<hr />

<h2 id="Register-a-MyProxy-OAuth-account-credential"><span class="method name"><span class="name">Register a MyProxy OAuth account credential</span></span></h2>

<p><em>post /users/username/credentials/oauth</em></p>

<p>This type of credential is used with a MyProxy service which exposes the OAuth protocol. This is the preferred method of working with MyProxy.  Note, that this action returns a redirct message, as opposed to a json body.  The url in the location header should be used to complete the OAuth dance.</p>

<p>Successfuly start the OAuth Dance with a MyProxy server</p>

<h4>example request</h4>

<pre class="shell"><code>curl -X POST https://graph.api.globusonline.org/users/username/credentials/oauth -d '{
        "username": "username", 
        "alias": "My OAuth", 
        "server": "grid.ci.uchicago.edu"
    }'
</code></pre>

<hr />

<h2 id="Register-a-standard-MyProxy-account-credential"><span class="method name"><span class="name">Register a standard MyProxy account credential</span></span></h2>

<p><em>post /users/username/credentials/myproxy</em></p>

<p>Standard MyProxy is not the best type of credential to use if your MyProxy server supports OAuth.  Using standard MyProxy requires the user to send their password to the Nexus service.</p>

<p>Successfully create a MyProxy Credential</p>

<h4>example request</h4>

<pre class="shell"><code>curl -X POST https://graph.api.globusonline.org/users/username/credentials/myproxy -d '{
        "username": "username", 
        "alias": "My MyProxy account", 
        "password": "password", 
        "server": "grid.ci.uchicago.edu"
    }'
</code></pre>

<hr />

<h2 id="List-Credentials"><span class="method name"><span class="name">List Credentials</span></span></h2>

<p><em>post /users/username/credentials</em></p>

<p>None</p>

<p>List credentials for user</p>

<h4>example request</h4>

<pre class="shell"><code>curl -X POST https://graph.api.globusonline.org/users/username/credentials
</code></pre>

<hr />

<h1 id="groups">Groups</h1>

<p>Manage groups.</p>

<h2 id="List-Groups"><span class="method name"><span class="name">List Groups</span></span></h2>

<p><em>Get /groups/list</em></p>

<p>Show a list of groups.  Groups are hierarchical, i.e., groups can have child groups.  As such, a list of groups needs to have a base node and a depth.  The depth defines how many generations of groups should be retrieved.  So, a depth of 1 will return all of the child groups of the root, while a depth of 2 will return all of the children and grandchildren of the root group.</p>

<p>Get a list of groups 1 deep</p>

<h4>example request</h4>

<pre class="shell"><code>curl -X GET https://graph.api.globusonline.org/groups/list?depth=1
</code></pre>

<hr />

<h1 id="group">Group</h1>

<p>Manage a specific group. The url for all groups is defined in the results of the group list.  It will follow the pattern /groups/&lt;groupid&gt; but the groupid is, at the moment, an opaque identifier.  Similarly, the urls for subresources of a group are defined by the group summary.  They will follow the same pattern of using the groupid as the identifier.</p>

<h2 id="Group-Summary"><span class="method name"><span class="name">Group Summary</span></span></h2>

<p><em>GET /groups/&lt;groupid&gt;</em></p>

<p>None</p>

<p>Describe a group.</p>

<h4>example request</h4>

<pre class="shell"><code>curl -X GET https://graph.api.globusonline.org/groups/27c0b7e4-260a-425b-8eb9-9637be7a4f3c
</code></pre>

<hr />

<h2 id="List-group-members"><span class="method name"><span class="name">List group members</span></span></h2>

<p><em>GET /groups/&lt;groupid&gt;/members</em></p>

<p>As with the group summary</p>

<p>Successfully retrieve the list of members in a group.</p>

<h4>example request</h4>

<pre class="shell"><code>curl -X GET https://graph.api.globusonline.org/groups/27c0b7e4-260a-425b-8eb9-9637be7a4f3c/members
</code></pre>

<hr />

<h2 id="Invite-member-to-group"><span class="method name"><span class="name">Invite member to group</span></span></h2>

<p><em>POST /groups/&lt;groupid&gt;/members</em></p>

<p>People can be invited to a group either by email address or by username.  While they will need to have a user account to join a group, an invitation can be sent to an individual without an account</p>

<p>Invite someone to join a group via email address (Likely someone without an account)</p>

<h4>example request</h4>

<pre class="shell"><code>curl -X POST https://graph.api.globusonline.org/groups/27c0b7e4-260a-425b-8eb9-9637be7a4f3c/members -d '{
        "emails": [
            "user1@no-reply.com", 
            "user2@no-reply.com"
        ]
    }'
</code></pre>

<hr />

<p>Invite someone to join a group by username</p>

<h4>example request</h4>

<pre class="shell"><code>curl -X POST https://graph.api.globusonline.org/groups/27c0b7e4-260a-425b-8eb9-9637be7a4f3c/members -d '{
        "users": [
            "user1", 
            "user2"
        ]
    }'
</code></pre>

<hr />

<h2 id="List-policies-for-group"><span class="method name"><span class="name">List policies for group</span></span></h2>

<p><em>GET /groups/&lt;groupid&gt;/policies</em></p>

<p>Return a collection of policies for a group.  These represent "effective" policies, meaning that the policy list has been merged from parent groups.</p>

<p>Successfully retrieve policy list</p>

<h4>example request</h4>

<pre class="shell"><code>curl -X GET https://graph.api.globusonline.org/groups/27c0b7e4-260a-425b-8eb9-9637be7a4f3c/policies
</code></pre>

<hr />

    </div>
<script type="text/javascript" charset="utf-8">
$(function() {
    var headerHeight = $("#header").height();

    var sections = $("#content h1[id], #content h2[id]");
    var sectionOffsets = [];
    var slack = 100;  // Give the section scroll some slack (in pixels).
    sections.each(function(elem) {
        sectionOffsets.push($(this).offset().top - headerHeight - slack);
    });

    var currSectionIdx = -1;
    function getSectionIdx(scrollDistance) {
        if (scrollDistance < sectionOffsets[0]) {
            return -1;
        } else {
            for (var id = sectionOffsets.length; id > 0; id--) {
                if (scrollDistance > sectionOffsets[id - 1]) {
                    return id - 1;
                    break;
                }
            }
        }
    }

    /** {{{ http://code.activestate.com/recipes/577787/ (r2) */
    _slugify_strip_re = /[^\w\s-]/g;
    _slugify_hyphenate_re = /[-\s]+/g;
    function slugify(s) {
      s = s.replace(_slugify_strip_re, '').trim().toLowerCase();
      s = s.replace(_slugify_hyphenate_re, '-');
      return s;
    }
    /** end of http://code.activestate.com/recipes/577787/ }}} */

    /* See <https://github.com/trentm/restdown/issues/11>. */
    function safechars(s) {
      return s.replace(_slugify_strip_re, '');
    }

    $("#content").scroll(function() {
        var scrollDistance = $("#content").scrollTop();
        var sectionIdx = getSectionIdx(scrollDistance);

        if (sectionIdx !== currSectionIdx) {
            $("#sidebar li>div").removeClass("current");
            currSectionIdx = sectionIdx;
            if (currSectionIdx >= 0) {
                var heading = $(sections[currSectionIdx]).text();
                var possibleAnchors = [
                    slugify(heading), // h1 or non-method h2
                    heading.replace(/ /g, '-'), // h2 method, just name or just endpoint
                    heading.slice(0, heading.lastIndexOf(' (')).trimRight().replace(/ /g, '-'), // h2 method, name and endpoint
                ];
                for (var i=0; i < possibleAnchors.length; i++) {
                    var anchor = safechars(possibleAnchors[i]);
                    try {
                        $("#sidebar a[href=#" + anchor + "]").parent().addClass("current");
                    } catch (e) {
                        /* Ignore error if no such element. */
                        console.log(e)
                    }
                }
            }
        }
    });
});
</script>

</body>
</html>
