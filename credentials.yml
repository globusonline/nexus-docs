name: Credentials
description: |
  Manage credentials associated with a user profile.

  Current supported types are:

  * X.509
  * MyProxy
  * MyProxy (OAuth)
  * SSH (OpenSSH format)
  * Google (OpenId)

actions:
  -
    name: Register a ssh credential.
    method: post
    path: /users/username/credentials/ssh2
    description:
    messages:
      -
        description: Successfully create an SSH credential for a user
        body:
          alias: My SSH Credential
          ssh_key: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCfsbK35x9W3fH/bZ/AJC0mq93DC7ulCleDeQoCsYHWWbLLDtWnlkpHCjXwK1zV7ECYh2FioUs/Dw38+Cj3H+T0EG2ZZrsG6LQOOOLMnAeOic0dD5KmkqJxsMXF1q+vuI1/DKH4qv3ijELduKyqnm/TvXaed+ibrKnM+BWNb0/e2ZmvWZxlBtPC5vpn6VRXDVKbxbwK+X/VRfYyyh0UZcsPoVs99xeHOPZ8c9xCK3Gx9Djp78IWXFcEuuz29wWb/3LEwq7btvA8GC+qNDa+Sh3Co2ikvfoa8g0jVEr58aqE6IwD9NMEoIcK/rDvdoyP39mTBKqHYBQRJ+JOzX9KyViB comment
  -
    name: Register an X.509 credential
    method: post
    path: /users/username/credentials/x509
    description:
    messages:
      -
        description: Successfully create an X.509 credential for a user
        body:
          alias: My X.509
          certificate: |
            -----BEGIN CERTIFICATE-----
            MIICejCCAeOgAwIBAgIBCTANBgkqhkiG9w0BAQUFADBJMQswCQYDVQQGEwJVUzEa
            MBgGA1UEChMRR2xvYnVzIENvbnNvcnRpdW0xHjAcBgNVBAMTFUNlcnRpZmljYXRl
            IEF1dGhvcml0eTAeFw0xMTAyMjQxOTU0MjBaFw0xMjAyMjQxOTU0MjBaMEAxCzAJ
            BgNVBAYTAlVTMRowGAYDVQQKExFHbG9idXMgQ29uc29ydGl1bTEVMBMGA1UEAxMM
            Skdsb2J1cyB0ZXN0MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC/lJGJInNL
            8EtkxNpkiSzAYDHgnEdopx7t7oyzAFIZ/wUXm2EL10M3maj/RaB+9buqmcSxMBp3
            nRJT72GO0MkxAYp20MSiDmDoTOQOwj4drt1plfYgDVfGp6NZdzaYGuu9FCIp8rNA
            9r45yE71rq7C/pgZkMgk231ICtJPWCAriwIDAQABo3sweTAJBgNVHRMEAjAAMCwG
            CWCGSAGG+EIBDQQfFh1PcGVuU1NMIEdlbmVyYXRlZCBDZXJ0aWZpY2F0ZTAdBgNV
            HQ4EFgQUeyIZsiXmtX/rBWJe1q2d1YkLZYQwHwYDVR0jBBgwFoAUeLGfYCEMWUsK
            TXr/aUeO0l3bGVYwDQYJKoZIhvcNAQEFBQADgYEA0xLD3WI14KnbUkD1kag0/vFk
            /RIYVEfGQEBQRAg9u48+5VixO5yPG8YCNODMAAMfBvmVBv1cuCszlLllDxVT96VM
            L3IjT582oYzQbk1DaDvGwNmQ1RTah6o/+CSOeRZ4Jr4h2p2CaTbMF2gwg+KLx8Pc
            PHNCl/fPxmu/1EYUBHo=
            -----END CERTIFICATE-----

  -
    name: Register a MyProxy OAuth account credential
    method: post
    path: /users/username/credentials/oauth
    description: This type of credential is used with a MyProxy service which exposes the OAuth protocol. This is the preferred method of working with MyProxy.  Note, that this action returns a redirct message, as opposed to a json body.  The url in the location header should be used to complete the OAuth dance.
    messages:
      -
        description: Successfuly start the OAuth Dance with a MyProxy server
        body:
          alias: My OAuth
          username: username
          server: grid.ci.uchicago.edu

  -
    name: Register a standard MyProxy account credential
    method: post
    path: /users/username/credentials/myproxy
    description: Standard MyProxy is not the best type of credential to use if your MyProxy server supports OAuth.  Using standard MyProxy requires the user to send their password to the Nexus service.
    messages:
      -
        description: Successfully create a MyProxy Credential
        body:
          alias: My MyProxy account
          password: password
          username: username
          server: grid.ci.uchicago.edu

  -
    name: List Credentials
    method: post
    path: /users/username/credentials
    description:
    messages:
      -
        description: List credentials for user

